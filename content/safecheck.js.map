{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@urbandevs/mario-core/dist/src/Packages/WindowPost/Bg/PostBgEvents.js","webpack:///./node_modules/@urbandevs/mario-core/dist/src/Packages/WindowPost/Use.js","webpack:///./node_modules/@urbandevs/mario-core/dist/src/Packages/WindowPost/Client/PostClient.js","webpack:///./node_modules/@urbandevs/mario-core/dist/src/Packages/WindowPost/Server/PostServer.js","webpack:///./node_modules/@urbandevs/mario-core/dist/src/Packages/WindowPost/Server/PostServerEvents.js","webpack:///./node_modules/@urbandevs/mario-core/dist/src/Packages/WindowPost/Client/PostClientEvents.js","webpack:///./node_modules/@urbandevs/mario-core/dist/src/Core/MarioEvent.js","webpack:///./node_modules/guid-typescript/dist/guid.js","webpack:///./node_modules/@urbandevs/mario-core/dist/src/Packages/ContentDispatcher/Bg/ContentDispatcherService.js","webpack:///./node_modules/@urbandevs/mario-urls-safe-check/dist/content/content.js","webpack:///./node_modules/@urbandevs/mario-urls-safe-check/dist/content/page-context.js","webpack:///./node_modules/@urbandevs/mario-core/dist/src/Packages/WindowPost/PostHelper.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","PostBgEvents","ContentDispatcherService_1","PostClient_1","PostServer_1","PostHelper_1","document","contentType","dispatcher","ContentDispatcherService","serverName","PostHelper","clientName","server","PostServer","window","for","script","createElement","innerHTML","PostClient","toString","async","documentElement","appendChild","destination","this","serverListeners","bgRequestsListeners","bgEventsListeners","addEventListener","message","data","isNotForMe","hasNotEventProp","event","response","args","hasBgRequestListener","requestId","e","console","log","hasBgEventListener","id","payload","hasServerListener","generateUIID","postMessage","location","origin","bgEventName","request","emitToServer","listener","replace","Math","random","PostBgEvents_1","MarioEvent_1","PostServerEvents_1","guid_typescript_1","PostClientEvents_1","listeners","PostClientEvents","BG_REQUEST","emit","MarioEvent","hasClientListener","on","RESPONSE","marioEvent","emitToClient","PostServerEvents","BG_RESPONSE","EVENT","BG_EVENT","Guid","guid","TypeError","EMPTY","isGuid","validator","test","gen","join","createEmpty","parse","raw","count","out","substring","equals","other","isEmpty","toJSON","RegExp","listenersIndex","counter","chrome","runtime","onMessage","addListener","isEventMessage","hasEventListeners","promises","keys","promise","push","Promise","all","then","callback","sendMessage","handler","listenerId","hasListener","Error","page_context_1","PageContext","clientKey","client","bindEvents","self","f","history","pushState","ret","apply","arguments","onUrlChange","firstReplaceEvent","replaceState","params","emitToBg"],"mappings":"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","file":"content/safecheck.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 371);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PostBgEvents;\n(function (PostBgEvents) {\n    PostBgEvents[\"RESPONSE\"] = \"WINDOW_POST_MESSAGE_RESPONSE\";\n    PostBgEvents[\"EVENT\"] = \"WINDOW_POST_MESSAGE_EVENT\";\n})(PostBgEvents = exports.PostBgEvents || (exports.PostBgEvents = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ContentDispatcherService_1 = require(\"../ContentDispatcher/Bg/ContentDispatcherService\");\nconst PostClient_1 = require(\"./Client/PostClient\");\nconst PostServer_1 = require(\"./Server/PostServer\");\nconst PostHelper_1 = require(\"./PostHelper\");\nif (document.contentType === 'text/html') {\n    const dispatcher = new ContentDispatcherService_1.ContentDispatcherService();\n    const serverName = PostHelper_1.PostHelper.serverName();\n    const clientName = PostHelper_1.PostHelper.clientName();\n    const server = new PostServer_1.PostServer(serverName, clientName, dispatcher);\n    window[Symbol.for(serverName)] = server;\n    const script = document.createElement('script');\n    script.innerHTML = `\n    window[Symbol.for('${clientName}')] = new (${PostClient_1.PostClient.toString()})('${clientName}', '${serverName}')`;\n    script.async = false;\n    document.documentElement.appendChild(script);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass PostClient {\n    constructor(name, destination) {\n        this.name = name;\n        this.destination = destination;\n        this.serverListeners = {};\n        this.bgRequestsListeners = {};\n        this.bgEventsListeners = {};\n        window.addEventListener('message', (message) => {\n            const data = message.data;\n            const isNotForMe = !(data.destination && data.destination === this.name);\n            const hasNotEventProp = !data.event;\n            if (isNotForMe || hasNotEventProp) {\n                return;\n            }\n            if (data.event === 'MARIO_POST_SERVER__BG_RESPONSE') {\n                const response = data.args;\n                if (this.hasBgRequestListener(response.requestId)) {\n                    try {\n                        this.bgRequestsListeners[response.requestId](response.response);\n                    }\n                    catch (e) {\n                        console.log(e);\n                    }\n                    delete this.bgRequestsListeners[response.requestId];\n                }\n            }\n            else if (data.event === 'MARIO_POST_SERVER__BG_EVENT') {\n                const response = data.args;\n                if (this.hasBgEventListener(response.event)) {\n                    try {\n                        this.bgEventsListeners[data.id](response.payload);\n                    }\n                    catch (e) {\n                        console.log(e);\n                    }\n                }\n            }\n            else if (this.hasServerListener(data.event)) {\n                try {\n                    this.serverListeners[data.event](data.args);\n                }\n                catch (e) {\n                    console.log(e);\n                }\n            }\n            else {\n                console.log(`event not handled: ${data.event}`);\n            }\n        });\n    }\n    emitToServer(event, args) {\n        const id = this.generateUIID();\n        const message = {\n            args,\n            destination: this.destination,\n            event,\n            id,\n        };\n        window.postMessage(message, location.origin);\n        return id;\n    }\n    emitToBg(bgEventName, args) {\n        const requestId = this.generateUIID();\n        const request = { bgEventName, requestId, args };\n        this.emitToServer('MARIO_POST_SERVER__BG_REQUEST', request);\n        return requestId;\n    }\n    hasServerListener(event) {\n        return !!this.serverListeners[event];\n    }\n    hasBgRequestListener(requestId) {\n        return !!this.bgRequestsListeners[requestId];\n    }\n    hasBgEventListener(bgEventName) {\n        return !!this.bgEventsListeners[bgEventName];\n    }\n    fromServerEvent(event, listener) {\n        this.serverListeners[event] = listener;\n    }\n    fromBgEvent(bgEventName, listener) {\n        this.bgEventsListeners[bgEventName] = listener;\n    }\n    fromBgResponse(requestId, listener) {\n        this.bgRequestsListeners[requestId] = listener;\n    }\n    generateUIID() {\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    }\n}\nexports.PostClient = PostClient;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst PostBgEvents_1 = require(\"../Bg/PostBgEvents\");\nconst MarioEvent_1 = require(\"./../../../Core/MarioEvent\");\nconst PostServerEvents_1 = require(\"./PostServerEvents\");\nconst guid_typescript_1 = require(\"guid-typescript\");\nconst PostClientEvents_1 = require(\"../Client/PostClientEvents\");\nclass PostServer {\n    constructor(name, destination, dispatcher) {\n        this.name = name;\n        this.destination = destination;\n        this.dispatcher = dispatcher;\n        this.listeners = {};\n        window.addEventListener('message', (message) => {\n            const data = message.data;\n            const isNotForMe = !(data.destination && data.destination === this.name);\n            const hasNotEventProp = !data.event;\n            if (isNotForMe || hasNotEventProp) {\n                return;\n            }\n            if (data.event === PostClientEvents_1.PostClientEvents.BG_REQUEST) {\n                const request = data.args;\n                this.dispatcher.emit(new MarioEvent_1.MarioEvent(request.bgEventName, request.args, request.requestId));\n            }\n            else if (this.hasClientListener(data.event)) {\n                this.listeners[data.event](data.args);\n            }\n        });\n        this.dispatcher.on(PostBgEvents_1.PostBgEvents.RESPONSE, (marioEvent) => {\n            const response = marioEvent.data;\n            const args = {\n                requestId: marioEvent.id,\n                response: response.response,\n            };\n            this.emitToClient(PostServerEvents_1.PostServerEvents.BG_RESPONSE, args);\n        });\n        this.dispatcher.on(PostBgEvents_1.PostBgEvents.EVENT, (marioEvent) => {\n            const payload = marioEvent.data;\n            const args = {\n                event: payload.event,\n                payload: payload.payload,\n            };\n            this.emitToClient(PostServerEvents_1.PostServerEvents.BG_EVENT, args);\n        });\n    }\n    emitToClient(event, args) {\n        const message = {\n            args,\n            destination: this.destination,\n            event,\n            id: guid_typescript_1.Guid.create().toString(),\n        };\n        window.postMessage(message, location.origin);\n    }\n    fromClient(event, listener) {\n        this.listeners[event] = listener;\n    }\n    hasClientListener(event) {\n        return !!this.listeners[event];\n    }\n}\nexports.PostServer = PostServer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PostServerEvents;\n(function (PostServerEvents) {\n    PostServerEvents[\"BG_RESPONSE\"] = \"MARIO_POST_SERVER__BG_RESPONSE\";\n    PostServerEvents[\"BG_EVENT\"] = \"MARIO_POST_SERVER__BG_EVENT\";\n})(PostServerEvents = exports.PostServerEvents || (exports.PostServerEvents = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PostClientEvents;\n(function (PostClientEvents) {\n    PostClientEvents[\"BG_REQUEST\"] = \"MARIO_POST_SERVER__BG_REQUEST\";\n})(PostClientEvents = exports.PostClientEvents || (exports.PostClientEvents = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst guid_typescript_1 = require(\"guid-typescript\");\nclass MarioEvent {\n    constructor(event, data, id) {\n        this.event = event;\n        this.data = data;\n        this.id = id ? id : guid_typescript_1.Guid.create().toString();\n    }\n}\nexports.MarioEvent = MarioEvent;\n","\"use strict\";\r\nexports.__esModule = true;\r\nvar Guid = /** @class */ (function () {\r\n    function Guid(guid) {\r\n        if (!guid) {\r\n            throw new TypeError(\"Invalid argument; `value` has no value.\");\r\n        }\r\n        this.value = Guid.EMPTY;\r\n        if (guid && Guid.isGuid(guid)) {\r\n            this.value = guid;\r\n        }\r\n    }\r\n    Guid.isGuid = function (guid) {\r\n        var value = guid.toString();\r\n        return guid && (guid instanceof Guid || Guid.validator.test(value));\r\n    };\r\n    Guid.create = function () {\r\n        return new Guid([Guid.gen(2), Guid.gen(1), Guid.gen(1), Guid.gen(1), Guid.gen(3)].join(\"-\"));\r\n    };\r\n    Guid.createEmpty = function () {\r\n        return new Guid(\"emptyguid\");\r\n    };\r\n    Guid.parse = function (guid) {\r\n        return new Guid(guid);\r\n    };\r\n    Guid.raw = function () {\r\n        return [Guid.gen(2), Guid.gen(1), Guid.gen(1), Guid.gen(1), Guid.gen(3)].join(\"-\");\r\n    };\r\n    Guid.gen = function (count) {\r\n        var out = \"\";\r\n        for (var i = 0; i < count; i++) {\r\n            // tslint:disable-next-line:no-bitwise\r\n            out += (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n        }\r\n        return out;\r\n    };\r\n    Guid.prototype.equals = function (other) {\r\n        // Comparing string `value` against provided `guid` will auto-call\r\n        // toString on `guid` for comparison\r\n        return Guid.isGuid(other) && this.value === other.toString();\r\n    };\r\n    Guid.prototype.isEmpty = function () {\r\n        return this.value === Guid.EMPTY;\r\n    };\r\n    Guid.prototype.toString = function () {\r\n        return this.value;\r\n    };\r\n    Guid.prototype.toJSON = function () {\r\n        return {\r\n            value: this.value\r\n        };\r\n    };\r\n    Guid.validator = new RegExp(\"^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$\", \"i\");\r\n    Guid.EMPTY = \"00000000-0000-0000-0000-000000000000\";\r\n    return Guid;\r\n}());\r\nexports.Guid = Guid;\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ContentDispatcherService {\n    constructor() {\n        this.listeners = {};\n        this.listenersIndex = {};\n        this.counter = 0;\n        chrome.runtime.onMessage.addListener((message) => {\n            if (!this.isEventMessage(message)) {\n                return;\n            }\n            if (!this.hasEventListeners(message.event)) {\n                console.log(`ContentDispatcherService: no listeners for an event ${message.event}`);\n                return;\n            }\n            const promises = [];\n            const listeners = this.listeners[message.event];\n            for (const key of Object.keys(listeners)) {\n                const listener = listeners[key];\n                const promise = listener(message);\n                promises.push(promise);\n            }\n            Promise.all(promises).then();\n            return false;\n        });\n    }\n    emit(event, callback) {\n        chrome.runtime.sendMessage(event, callback);\n    }\n    on(event, handler) {\n        const id = ++this.counter;\n        if (!this.hasEventListeners(event)) {\n            this.listeners[event] = {};\n        }\n        this.listeners[event][id] = handler;\n        this.listenersIndex[id] = event;\n        return id;\n    }\n    hasEventListeners(event) {\n        return typeof this.listeners[event] !== 'undefined';\n    }\n    removeListener(listenerId) {\n        if (this.hasListener(listenerId)) {\n            const event = this.listenersIndex[listenerId];\n            delete this.listeners[event][listenerId];\n            delete this.listenersIndex[listenerId];\n        }\n    }\n    hasListener(listenerId) {\n        return this.listenersIndex.hasOwnProperty(listenerId);\n    }\n    getListener(listenerId) {\n        if (!this.hasListener(listenerId)) {\n            // todo\n            throw new Error('boom');\n        }\n        const event = this.listenersIndex[listenerId];\n        return this.listeners[event][listenerId];\n    }\n    isEventMessage(message) {\n        return (typeof message === 'object') && (typeof message.event === 'string');\n    }\n}\nexports.ContentDispatcherService = ContentDispatcherService;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire(\"@urbandevs/mario-core/dist/src/Packages/WindowPost/Use\");\nconst PostHelper_1 = require(\"@urbandevs/mario-core/dist/src/Packages/WindowPost/PostHelper\");\nconst page_context_1 = require(\"./page-context\");\nconst clientName = PostHelper_1.PostHelper.clientName();\nconst script = document.createElement('script');\nscript.async = false;\nscript.innerHTML = `\n    new (${page_context_1.PageContext.toString()})('${clientName}')\n`;\ndocument.documentElement.appendChild(script);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PageContext = void 0;\nclass PageContext {\n    constructor(clientKey) {\n        this.client = window[Symbol.for(clientKey)];\n        this.bindEvents();\n    }\n    bindEvents() {\n        const self = this;\n        history.pushState = (f => function pushState() {\n            const ret = f.apply(this, arguments);\n            self.onUrlChange();\n            return ret;\n        })(history.pushState);\n        let firstReplaceEvent = true;\n        history.replaceState = (f => function replaceState(params) {\n            var ret = f.apply(this, arguments);\n            if (!firstReplaceEvent) {\n                self.onUrlChange();\n            }\n            firstReplaceEvent = false;\n            return ret;\n        })(history.replaceState);\n        window.addEventListener('hashchange', function () {\n            self.onUrlChange();\n        });\n    }\n    onUrlChange() {\n        this.client.emitToBg('URLS_SAFE_CHECK__CONTENT_URL_REWRITED');\n    }\n}\nexports.PageContext = PageContext;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass PostHelper {\n    static serverName() {\n        return `MARIO_POST_SERVER_${chrome.runtime.id}`;\n    }\n    static clientName() {\n        return `MARIO_POST_CLIENT_${chrome.runtime.id}`;\n    }\n}\nexports.PostHelper = PostHelper;\n"],"sourceRoot":""}